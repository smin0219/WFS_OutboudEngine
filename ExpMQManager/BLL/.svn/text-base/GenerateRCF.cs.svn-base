using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using ExpMQManager.DAL;
using ExpMQManager.Data;

namespace ExpMQManager.BLL
{
    public class GenerateRCF : GenerateBase
    {
        public override string doBuildUp(string msgType, string subType, int mid, int flightSeq, int queueId)
        {
            RcfEntity rcfEntity = new RcfDAC().GetRCFInfoDAC(mid, flightSeq, msgType, subType, queueId);
            return buildUpRCF(rcfEntity, msgType, subType);
        }

        public string buildUpRCF(RcfEntity msgEntity, string msgType, string subType)
        {
            string strAWB = "";

            strAWB = base.buildUpBase(msgEntity, msgType, subType);

            string rcfTime = msgEntity.arrCargoDate.ToString("dd") + transMonth(msgEntity.arrCargoDate.ToString("MM")) +
                            msgEntity.arrCargoDate.ToString("HH") + msgEntity.arrCargoDate.ToString("mm");
            string weightFormatted = string.Format("{0:0.0}", msgEntity.weightRCF);
            char shipmentCode = replaceShipmentIndicator(msgEntity.shipmentIndicatorRCF[0]);



            strAWB += subType.ToUpper() + "/" + msgEntity.flightNo + "/" + rcfTime + "/" + msgEntity.destFlight + "/" +
                shipmentCode + msgEntity.pcsRCF + "K" + weightFormatted + "\r\n";

            return strAWB;
        }

    }
}
